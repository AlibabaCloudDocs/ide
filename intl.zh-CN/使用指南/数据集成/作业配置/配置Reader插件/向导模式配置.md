# 向导模式配置 {#concept_qrh_r2c_p2b .concept}

本文将为您介绍如何通过数据集成向导模式进行任务配置。

任务配置的操作步骤如下所示：

1.  新建数据源。
2.  新建同步任务，并配置同步任务的读取端。
3.  配置同步任务的写入端。
4.  配置同步任务读写端的映射关系。
5.  配置同步任务的并发数和传输速度、以及数据传输中的脏数据条数、运行任务所在资源组等信息。
6.  配置同步任务的调度属性。

**说明：** 下文将为您介绍操作步骤的具体实现，以下每个步骤都会跳转到对应的指导文档中，请在完成当前步骤后，单击链接回到本文，继续下一步操作。

## 新建数据源 {#section_vkd_w2c_p2b .section}

同步任务支持多种同构、异构数据源间的数据传输。首先，将需要同步的数据源在数据集成中完成注册。注册完成后，在数据集成配置同步任务时，可直接选择数据源。

确认需要同步的数据源已经被数据集成支持后，可以开始在数据集成中注册数据源。详细的数据源注册步骤请参见[配置数据源信息](https://www.alibabacloud.com/help/faq-list/72788.htm)。

**说明：** 

-   有部分数据源数据集成不支持测试连通性，数据源测试连通性的支持详情请参见[数据源测试连通性](intl.zh-CN/使用指南/数据集成/数据源配置/数据源测试连通性.md#)。
-   很多时候，数据源都是创建在本地，没有公网IP或网络无法直达。在这种情况下，配置数据源的时候测试连通性会直接失败，数据集成支持[新增调度资源](intl.zh-CN/使用指南/数据集成/常见配置/新增调度资源.md#)来解决这种网络不可达的情况，但在新建同步任务的时候只能选择脚本模式（因为网络不可直达，在向导模式中就无法获取表结构等信息）。

## 新建同步任务并配置同步任务的读取端 {#section_tfn_1kc_p2b .section}

**说明：** 本文主要为您介绍向导模式下的同步任务配置，在数据集成中新建同步任务时请选择**向导模式**。

1.  以开发者身份进入[DataWorks管理控制台](https://workbench.data.aliyun.com/console)，单击对应项目操作栏中的**数据开发**。
2.  单击左侧菜单栏中的**数据开发**，打开业务流程导航栏。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937611_zh-CN.png)

3.  右键单击导航栏中的**数据集成**，选择**新建数据集成节点** \> **同步节点**，输入同步任务名称。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937612_zh-CN.png)

4.  新建同步任务完成后，需要配置数据同步任务的读取端数据源，以及需要同步的表信息等。

    在选择读取端的数据源时，请参见[配置Reader](https://www.alibabacloud.com/help/faq-list/49806.htm)。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937614_zh-CN.png)


**说明：** 很多任务在配置读取端数据源时，需要进行数据增量同步，此时可以结合DataWorks提供的[参数配置](intl.zh-CN/使用指南/数据开发/调度配置/参数配置.md#)来获取相对日期，以完成获取增量数据的需求。

## 配置同步任务的写入端 {#section_nz2_jlc_p2b .section}

配置完成读取端数据源信息后，可以配置右侧的写入端数据源，以及需要写入的表信息等。在选择写入端的数据源时，请参见[配置Writer](intl.zh-CN/使用指南/数据集成/作业配置/配置Writer插件/配置AnalyticDB（ADS） Writer.md#)。

**说明：** 很多任务在写入时，需要选择写入模式。比如覆盖写入还是追加写入，针对不同的数据源，有不同的写入模式。有写入控制需求的同学，请参见[配置Writer](intl.zh-CN/使用指南/数据集成/作业配置/配置Writer插件/配置AnalyticDB（ADS） Writer.md#)文档，合理选择写入模式。

## 配置同步任务读写端的映射关系 {#section_h35_qlc_p2b .section}

当读取端和写入端部分的配置都完成后，需要指定读取端和写入端列的映射关系，可选择**同行映射**或**自动排版**。

-   同行映射：自动将同一行的数据设置映射关系。
-   自动排版：设置完映射关系后，字段排序展示。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937615_zh-CN.png)

**说明：** 请注意列与列之间映射的字段类型是否有做数据兼容。

## 同步任务效率设置 {#section_s3r_zlc_p2b .section}

当上述步骤都配置完成后，则需进行效率配置。效率配置主要包括DUM设置、同步并发数设置、同步速率设置、同步脏数据设置和同步资源组设置等信息。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937616_zh-CN.png)

配置项说明如下：

-   DMU：数据集成的计费单位。

    **说明：** 设置DMU的时候需要注意，DMU的值限制了最大并发数的值，请合理配置。

-   作业并发数：配置的时候会结合读取端指定的切分建，将数据分成多个Task，多个Task同时运行，以达到提速的效果。
-   同步速率：设置同步速率可保护读取端数据库，以避免抽取速度过大，给源库造成太大的压力。同步速率建议限流，结合源库的配置，请合理配置抽取速率。
-   脏数据：类似源端是Varchar类型的数据，写到Int类型的目标列中，导致因为转换不合理而无法写入的数据。同步脏数据的设置，主要在于控制同步数据的质量问题。建议根据业务情况，合理配置脏数据条数。
-   同步资源组：配置同步任务时，指定任务运行所在的资源组，默认运行在默认资源组上。当项目调度资源紧张时，也可以通过新增自定义资源组的方式来给调度资源进行扩容，然后将同步任务指定在自定义资源组上运行，新增自定义资源组的操作请参见[新增调度资源](intl.zh-CN/使用指南/数据集成/常见配置/新增调度资源.md#)。您可根据数据源网络情况、项目调度资源情况和业务重要程度，进行合理配置。

**说明：** 当同步数据的效率低下时，请参见[优化配置](intl.zh-CN/使用指南/数据集成/作业配置/优化配置.md#)对您的同步任务进行优化。

## 同步任务配置调度参数 {#section_dhv_xmc_p2b .section}

在同步任务中经常需要使用调度参数来做数据过滤，下文将为您介绍如何在同步任务中配置调度参数。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892937617_zh-CN.png)

如上图所示，您可通过$\{变量名\}的方式声明调度参数变量，当变量声明完成后，在调度的参数属性中写上变量的初始化值，此处变量初始化的值以$\[\]为标识，其中的内容可填时间表达式或者一个常量。

例如在代码中写了$\{today\}，在调度参数中赋值today=$\[yyyymmdd\]，则可获取到当天的日期，若要对日期进行加减操作，请参见[参数配置](intl.zh-CN/使用指南/数据开发/调度配置/参数配置.md#)。

## 在同步任务中使用自定义调度参数 {#section_scv_jnc_p2b .section}

在同步任务中只需要在代码中声明如下参数即可。

-   bizdate：获取到业务日期，运行日期-1。
-   cyctime：获取到当前运行时间，格式为yyyymmddhhmiss。
-   Dataworks提供了两个系统默认调度参数bizdate和cyctime 。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16216/15377892947618_zh-CN.png)

## 配置调度属性 {#section_a4t_rnc_p2b .section}

在调度属性中可以设置同步任务的运行周期，运行时间，任务依赖等。由于同步任务是ETL工作的开始，所以没有上游节点，此时建议使用项目根节点作为上游。

完成同步任务的配置后，请保存节点并提交。

