# 补数据实例 {#concept_nrn_pxh_r2b .concept}

补数据实例是对周期任务进行补数据时产生的实例，可对补数据任务实例进行运维管理，如查看运行状态，对任务实例进行终止、重跑、解冻等操作。

**说明：** 补数据实例限制与说明

-   如果是补了一个区间的数据任务，在第一天有一个任务实例失败了，则当天的补数据实例会被置为失败，第二天的任务实例也不会开始运行（只有当天的全部任务实例都成功，第二天的任务实例才会开始运行）。
-   自依赖的周期任务补数据，如果补数据第一个实例前一天的周期实例没有运行，则该补数据任务也无法触发运行。如果补数据的第一个实例前一天没有周期实例，则补数据直接触发运行。
-   目前仅有周期实例在任务失败时有报警。手动实例、补数据实例和测试实例任务失败均无报警。
-   如果当前任务的周期实例正在运行中，补数据和测试实例必须等周期实例完成才能开始运行。
-   如果周期实例和补数据实例同时都在运行，为了保证周期实例的正常运行，补数据实例会被kill。

## 补数据 {#section_x4l_hnr_lgb .section}

在您的**周期任务**列表中选择您的周期实例，右键即可选择**补数据**。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937211_zh-CN.png)

您可以选择对**当前节点**进行补数据或者为**当前节点及下游节点**进行补数据。

完成补数据节点的选择后，在弹框中您可以选择**是否并行**，控制同时生成多少个补数据实例来进行补数据：您可以选择**不并行**，即只有一个补数据实例；或同时使用**2组**/**3组**/**4组**/**5组**多个补数据实例进行补数据。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937210_zh-CN.png)

**说明：** 

-   不并行：一个补数据实例下的多个业务日期**串行执行**。
-   多个补数据实例下的多个业务日期：
    -   如果业务日期的跨度时间少于选择的并行组数，则**并行执行**：例如业务日期是 1月11日-1月13日 ， 并行组数选择的是4组， 则只会生成3个补数据实例（每个补数据实例对应一个业务日期），三个实例同时并发执行。
    -   如果业务日期的跨度大于选择的并行组数，则可能兼有**串行和并行**：例如业务日期是 1月11日-1月13日， 并行组数选择是2组， 则会生成2个补数据实例（其中一个补数据实例会有两个业务日期，这两个业务日期对应的任务**串行执行**），两个补数据实例**并行**执行。

## 为组合节点中的特定节点补数据 {#section_ntl_zpp_mgb .section}

您在DataWorks 1.0中使用的工作流，在您升级DataWorks V2.0后会在运维中心自动转换为**组合节点**。如果您需要为组合节点中的特定节点进行补数据，需遵照以下流程：

1.  在您的周期任务节点中找到组合节点对应的任务，在DAG图中右键选择**查看内部节**点。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937651_zh-CN.png)

2.  在弹框中找到组合节点中您需要补数据的节点的上游节点，复制其**节点ID**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937652_zh-CN.png)

3.  回到**周期任务**页面，**搜索**您刚刚获取的内部节点ID，右键点击搜索结果的DAG，选择**补数据** \> **当前节点及下游节点**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937654_zh-CN.png)

4.  现在，您可以选择您需要补数据的组合节点内的特定节点了。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937655_zh-CN.png)


**说明：** 当前支持从组合节点查找到内部节点，但是不支持从内部节点查找到组合节点。

## 海量补数据 {#section_pps_dxs_ngb .section}

1.  单击**周期任务**列表中相应的周期实例。
2.  在DAG图中右键选择**补数据** \> **海量节点模式**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937890_zh-CN.png)

3.  填写补数据对话框中的配置。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/155427314937892_zh-CN.png)

    |配置|说明|
    |:-|:-|
    |**补数据名称**|通常会根据的您的节点自动生成一个补数据名称。|
    |**选择业务日期**|选择您的业务时间，但不能选择当天的时间。**说明：** 建议不要补太长时间的数据，以免出现任务需要等待资源的情况。

|
    |**是否并行**|您可以根据自身情况选择**不并行**、**2组**、**3组**、**4组**或**5组**。如果选择不并行，只能看见一个补数据实例。如果选择分组，则分几组便可看到几个补数据实例。|
    |**选择需要补数据的节点**|     -   如果勾选了**包含当前节点**，则补的是此节点及下游的数据。
    -   如果没有勾选**包含当前节点**，则当前节点为空跑，补此节点下的下游数据。
 |
    |**选择工作空间**|一般展现**您的所有项目**和**补数据的项目**，可以通过刷新选择相关的项目（此处支持模糊查询），然后将其加入补数据项目列表。|
    |**节点白名单**|添加选中项目外仍需要进行补数据的节点。**说明：** 目前仅支持搜索节点ID。

|
    |**节点黑名单**|添加选中项目中不需要进行补数据的节点。**说明：** 目前仅支持搜索节点ID。

|


## 实例列表 {#section_i2k_xs3_r2b .section}

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/15542731498837_zh-CN.jpg)

|操作|说明|
|:-|:-|
|**筛选**|如上图中的模块1，有丰富的筛选条件。您可添加补数据名称、节点类型、责任人、运行日期等条件进行更精确的筛选。|
|**DAG图**|可以打开此节点的DAG图，查看实例运行的结果。|
|**终止运行**|如果实例在运行中，可单击**终止运行**，停止任务运行。|
|**重跑**|重新调度此实例。|
|**重跑下游**|重跑此节点的下游任务。|
|**暂停（冻结）**|将当前节点置为暂停（冻结）状态，并停止调度，当节点状态为暂停时，在节点名称后会出现![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/15542731498856_zh-CN.png)图标。|
|**恢复（解冻）**|将暂停（冻结）的节点恢复调度。|
|**查看血缘**|查看节点的血缘关系图。|

## 实例DAG图 {#section_q3l_ft3_r2b .section}

单击节点名称或操作栏中的**DAG图**，即可打开此实例的DAG图界面。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16361/15542731498838_zh-CN.jpg)

**说明：** 上图中右上角的刷新按钮只能刷新实例DAG状态，不能刷新下方的**运行日志**。

-   右键单击实例，可以查看该实例的依赖关系等详细信息，并进行终止运行、重跑等具体操作。

    |操作|说明|
    |:-|:-|
    |**查看运行日志**|进入运维日志界面，可以在运维日志中看到logview等信息。|
    |**查看代码**|查看节点当前代码。|
    |**编辑节点**|单击后可进入节点编辑页面，对节点内容进行修改。|
    |**查看节点影响**|单击后可查看节点基本信息、影响基线信息和运行信息。|
    |**查看血缘**|查看该节点的血缘关系。|
    |**查看更多详情**|查看节点属性、运行日志、操作日志和代码等信息。|
    |**终止运行**|终止任务，只对本次实例有效|
    |**重跑**|失败的任务或状态异常的任务重跑实例。|
    |**重跑下游**|当前节点的下游重跑实例，如果存在多个下游实例，会将这些实例全部重跑。|
    |**置成功**|将当前节点状态改为成功。**说明：** 只有失败状态的任务能被置成功，工作流任务不能置成功。

|
    |**紧急操作**|当前实例在非常紧急的情况下的操作，紧急操作只对当前节点本次有效，包括去除依赖、修改优先级、强制重跑。    -   **去除依赖**：解除这个节点的依赖关系，常用于上游失败并与此实例没有数据关系时，启动此节点。
    -   **修改优先级**：修改当前实例的优先级，当节点非常重要，且运行速度缓慢时使用（不推荐使用）。
    -   **强制重跑**：忽略当前实例的状态，强制重新启动（不推荐使用）。
|
    |**暂停（冻结）**|将当前节点置为暂停（冻结）状态，并停止调度。|
    |**恢复（解冻）**|将暂停（冻结）的节点恢复调度。|

-   双击实例，即可弹出任务属性、运行日志、操作日志、代码等。

    |查看内容|说明|
    |:---|:-|
    |**属性**|此节点的属性介绍，包括调度类型、状态、时间等信息。|
    |**运行日志**|此节点在运行后或运行中的日志信息。|
    |**操作日志**|对节点的操作日志，包括节点变更、补数据等操作的记录。|
    |**代码**|节点编辑的代码。|


## 实例状态说明 {#section_jjq_xw3_r2b .section}

|序号|状态类型|状态标识|
|:-|:---|:---|
|1|运行成功状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508784_zh-CN.png)|
|2|未运行状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508785_zh-CN.png)|
|3|运行失败状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508786_zh-CN.png)|
|4|正在运行状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508787_zh-CN.png)|
|5|等待状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508788_zh-CN.png)|
|6|冻结状态|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16359/15542731508789_zh-CN.png)|

