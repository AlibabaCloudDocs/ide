# 步骤五：运维及日志排错 {#concept_whk_pzl_s2b .concept}

本文将为您介绍如何实现任务的运维工作，并查看日志进行排错。

在[设置周期和依赖](intl.zh-CN/快速开始/步骤四：设置周期和依赖.md#)的操作中，您配置了每周二凌晨2点执行同步任务，将任务提交后需要到第二天才能看到调度系统自动执行的结果，那么如何确认实例运行的定时时间和相互依赖关系符合预期呢？DataWorks提供了测试运行、补数据和周期运行3种触发方式。

-   **测试运行**：手动触发方式。如果您仅需确认单个任务的定时情况和运行，建议使用测试运行。
-   **补数据运行**：手动触发方式。如果您需要确认多个任务的定时情况和相互依赖关系，或者需要从某个根任务开始重新执行数据分析计算，可以考虑使用此方式。
-   **周期运行**：系统自动触发方式。提交成功的任务，调度系统在第二天0点起会自动触发当天不同时间点的运行实例，并在定时时间达到时检查各实例的上游实例是否运行成功，如果定时时间已到并且上游实例全部运行成功，则当前实例会自动触发运行，无需人工干预。

**说明：** 手动触发和自动调度的调度系统与周期生成实例的规则一致。

-   无论周期选择天/小时/分钟/月/周，任务在每一个日期都会有对应实例生成。
-   仅在指定日期的对应实例会定时运行并生成运行日志。
-   非指定日期的对应实例不会实际运行，而是在满足运行条件时将状态直接转换为成功，因此不会有运行日志生成。

关于任务运维的更多操作和功能说明，请参见[任务运维](../../../../intl.zh-CN/使用指南/运维中心/任务运维/周期实例.md#)。

## 测试运行 {#section_hmf_k2s_s2b .section}

1.  在运维中心页面，找到需要运行的任务，单击**测试运行**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160629007_zh-CN.png)

2.  输入业务日期，单击**确认**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160629008_zh-CN.png)

3.  前往测试实例页面，查看任务运行状态。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160629009_zh-CN.png)

4.  选择测试实例页面中相应的任务实例并单击，即可看到实例DAG图。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160629010_zh-CN.png)

    -   右键单击实例，可以查看该实例的依赖关系和详细信息并进行终止运行、重跑等具体操作。
    -   双击实例，即可弹出任务属性、运行日志、操作日志、代码等。
    **说明：** 

    -   测试运行是手动触发任务，只要定时时间到了，立即运行，无视实例的上游依赖关系。
    -   根据前文所述的实例生成规则，配置为每周二凌晨2点运行的任务write\_result，测试运行时选择的业务日期是周一（业务日期=运行日期-1），实例会在2点真正运行。如果不是周一，则实例在2点转换为成功状态，且没有日志生成。

## 补数据运行 {#section_idd_mhs_s2b .section}

如果需要确认多个任务的定时情况和相互依赖关系，或者需要从某个根任务开始重新执行数据分析计算，可选择**运维中心** \> **任务列表** \> **周期任务**页面，单击相应任务后的**补数据**，来补跑某段时间的多个任务。

1.  选择**运维中心** \> **周期任务**页面，输入任务名称。
2.  单击查询结果后的**补数据**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160639016_zh-CN.png)

3.  设置补数据的业务日期为2018-07-15到2018-07-22，选择write\_result节点任务，单击**确定**。
4.  单击**前往查看补数据结果**。
5.  选择补数据实例页面中相应的任务实例并单击，即可看到实例DAG图。

    -   右键单击实例，可以查看该实例的依赖关系和详细信息并进行终止运行、重跑等具体操作。
    -   双击实例，即可弹出任务属性、运行日志、操作日志、代码等。
    **说明：** 

    -   上图中的2017-09-18 15:56:30.919 \[job-51109647\]为JobID。
    -   上图中的任务失败，是因为同步的表中，源头没有这个分区值，所以读取失败。
    -   补数据任务的实例是一天依赖一天的，例如补了2017-09-15到2017-09-18这段时间的任务，如果15号的实例运行失败了，则16号的实例也不会运行。
    -   根据前文所述的实例生成规则，配置为每周二凌晨2点运行的任务write\_result，补数据运行时选择的业务日期是周一（业务日期=运行日期-1），实例会在2点真正运行。如果不是周一，则实例在2点转换为成功状态，且没有日志生成。

## 周期自动运行 {#section_frv_rjs_s2b .section}

周期自动运行，由系统根据所有任务的调度配置自动触发，所以页面没有操作入口。您可以通过以下两种方式查看实例信息和运行日志。

-   在**运维中心** \> **周期实例**页面选择业务日期或运行日期等参数，搜索write\_result任务对应的实例，然后右键查看实例信息和运行日志。
-   选择周期实例页面中相应的任务实例并单击，即可看到实例DAG图。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16184/15405160639021_zh-CN.png)

    -   右键单击实例，可以查看该实例的依赖关系和详细信息并进行终止运行、重跑等具体操作。
    -   双击实例，即可弹出任务属性、运行日志、操作日志、代码等。
    **说明：** 

    -   该任务未运行是因为上游任务未运行。
    -   如果任务的实例初始状态为未运行，当定时时间到达时，调度系统会检查这个实例的全部上游实例是否运行成功。
    -   只有上游实例全部运行成功并且定时时间到达的实例，才会被触发运行。
    -   处于未运行状态的实例，请确认上游实例已经全部成功且已到定时时间。

