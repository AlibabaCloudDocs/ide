# 向导模式生成API {#concept_cgn_txh_r2b .concept}

本文将为您介绍向导模式生成API的操作步骤和注意事项。

使用向导模式生成数据API简单且容易上手，不需要编写任何代码，通过产品界面进行勾选配置即可快速生成API。推荐对API功能的要求不高或者无代码开发经验的用户使用。

**说明：** 配置API前，请首先在DataWorks控制台的**数据集成** \> **数据源**页面配置好数据源。

## 配置API基础信息 {#section_qdt_jzh_r2b .section}

1.  导航至**API服务列表**中的**生成API**页面。
2.  单击**向导模式**，填写API基础信息。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16407/15368068828791_zh-CN.png)

    配置过程中请注意API分组的设置。API分组是指针对某一个功能或场景的API集合，也是API网关对API的最小管理单元。在阿里云API市场中，一个API分组对应于一个API商品。

    **说明：** API分组的设置示例如下：

    例如您要配置一个天气查询的API产品，天气查询API由城市名称查询天气API、景点名称查询天气API和邮编查询天气API三种API组成，那么就可以创建一个名为天气查询的API分组，并把以上三种API放在这个分组中。然后把这个API上架到API市场中销售时，就会呈现为一个天气查询的API产品。

    当然，如果您生成的API在自己的APP中使用，则可以把分组当作分类来使用。

    目前，生成API仅支持HTTP协议、GET请求方式和JSON返回类型。

3.  填写好API基础信息之后，单击**下一步**，即可进入API参数配置页面。

## 配置API参数 {#section_c1n_g13_r2b .section}

1.  导航至**数据源类型** \> **数据源名称** \> **数据表**，选择需要配置的表。

    **说明：** 您需提前在数据集成中配置好数据源，数据表下拉框支持表名搜索。

2.  配置参数字段。

    选择好数据表之后，左侧会自动列出这个表的所有字段，分别勾选需要设置为请求参数和返回参数的字段，分别添加到请求参数和返回参数列表当中。

3.  编辑参数信息。

    单击请求参数和返回参数列表右上角的**编辑**，进入参数信息编辑页面，设置参数的名称、示例值、默认值、是否必选、模糊匹配（只支持String类型设置）和描述。其中是否必选和描述必填。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16407/15368068828794_zh-CN.png)


配置过程中需要注意返回结果分页的设置。

-   如果不开启**返回结果分页**，则API默认最多返回500条记录。
-   如果返回结果可能超过500条，请开启**返回结果分页**功能。

开启返回结果分页后，会自动增加以下公共参数。

-   公共请求参数
    -   pageNum：当前页号。
    -   pageSize：页面大小，即每页记录数。
-   公共返回参数
    -   pageNum：当前页号。
    -   pageSize：页面大小，即每页记录数。
    -   totalNum：总记录数。

**说明：** 

-   请求参数仅支持等值查询，返回参数仅支持字段值原样输出。
-   尽量将有索引的字段设置为请求参数。
-   API允许不设置请求参数，当无请求参数时，则必须开启返回结果分页。
-   为方便API调用者了解API详情，请尽量设置API参数的示例值、默认值、描述等信息。
-   单击已配置的API，可以查看当前的表已经生成的API列表，请避免生成同样的API。

完成API参数的配置后，单击**下一步**，即可进入API测试环节。

## API测试 {#section_d5j_nb3_r2b .section}

完成API参数的配置后，即可进行API测试。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16407/15368068828797_zh-CN.png)

填写好参数值，单击**开始测试**，即可在线发送API请求，在右侧可以看到API请求详情及返回内容。如果测试失败，请仔细查看错误提示并做相应的修改重新测试。

配置过程中需要注意正常返回示例的设置。配置好API之后，系统会自动生成异常返回示例和错误码，但没办法自动生成正常返回示例。需要在测试成功后，单击**保存为正常返回示例**，将当前的测试结果保存为正常返回示例。如果返回结果中有敏感数据需要脱敏，可以手动编辑修改。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16407/15368068828799_zh-CN.png)

**说明：** 

-   正常返回示例对于API的调用者来说，具有非常重要的参考意义，请务必配置。
-   API调用延迟是本次API请求的延迟，供您评估的API性能。如果延迟较大，则要考虑进行数据库优化。

完成API测试之后，单击**完成**，即成功生成了一个数据API。

## API详情查看 {#section_xp4_mc3_r2b .section}

回到API服务列表页面，单击操作列中的**详情**，可查看API的详情信息。API详情页面以调用者的视角展示了API的详细信息。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16407/15368068828800_zh-CN.png)

