# 设置并查询自定义脱敏 {#concept_t2q_zz4_mgb .concept}

DataWorks目前支持动态脱敏，本文将为您介绍如何设置数据保护伞自定义脱敏，并在DataWorks中进行脱敏查询。

## 数据保护伞自定义脱敏设置 {#section_slp_j2p_mgb .section}

**说明：** 您需要首先开通数据保护伞服务，方可使用数据保护伞自定义脱敏。

1.  登录DataWorks控制台，单击相应工作空间后的**进入数据开发**。
2.  单击左上角的DataWorks图标，选择**全部产品** \> **数据保护伞**。

    **说明：** 如果是第一次进入数据保护伞平台，则会跳转至产品页面，单击**立即体验**，即可进入**数据保护伞**页面。

3.  选择左侧菜单栏中的**规则配置** \> **数据脱敏管理**。

    ![数据脱敏管理](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763337641_zh-CN.png)

4.  在**脱敏场景**中选择**默认场景（\_default\_scene\_code）**，然后单击**新建规则**，添加需要进行自定义脱敏的规则。

    ![新建规则](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763337642_zh-CN.png)

5.  在新建规则对话框中，选择需要设置的**脱敏规则**、**责任人**和**脱敏方式**。

    ![新建规则](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437643_zh-CN.png)

    目前数据保护伞仅为**身份证号**脱敏规则提供**假名**、**HASH**和**掩盖**三种脱敏方式，其它脱敏规则仅提供**HASH**和**掩盖**两种脱敏方式。

    -   **假名** 

        假名脱敏会将一个值替换成一个具有相同特征的脱敏信息。使用假名脱敏时，需要选择安全域，相同的值在不同的安全域脱敏出来的假名信息不同。

    -   **HASH** 

        HASH脱敏需要选择一个安全域，相同的值在不同的安全域HASH脱敏后的值不一致。

        ![HASH](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437648_zh-CN.png)

    -   **掩盖** 

        掩盖脱敏是使用\*对部分信息进行掩盖，达到脱敏的效果，是一种比较常用的脱敏方式。

        ![掩盖脱敏](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437649_zh-CN.png)

        |配置|说明|
        |:-|:-|
        |**推荐方式**|为身份证、银行卡等常用的数据类型提供掩盖脱敏策略。|
        |**自定义**|自定义设置提供了更加灵活的设置方式，可以在前中后三段设置是否脱敏，以及需要脱敏（或者不脱敏）的字符长度。![自定义](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437718_zh-CN.png)

|

6.  设置成功后，单击**确认**，跳转至数据脱敏管理页面。
7.  在数据脱敏配置下，对脱敏策略进行**生效**或**失效**操作。

    ![数据脱敏配置](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437723_zh-CN.png)

    设置成功后，您可以单击相应脱敏规则后的![预览](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437724_zh-CN.png)图标，输入测试值进行脱敏验证。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437725_zh-CN.png)

8.  进入白名单配置管理页面，单击**新增白名单**。

    ![白名单配置](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437727_zh-CN.png)

9.  在新增白名单对话框中，设置**规则**、**账号**和**生效时间**，并单击**保存**。

    此处的账号支持主账号和RAM子账号。

    ![主账号](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437731_zh-CN.png)

    **说明：** 设置白名单生效时间后，如果不在白名单脱敏时间的区间内，该用户在查询该敏感信息时将会继续脱敏。


## DataWorks中进行脱敏查询 {#section_oqk_vjj_ngb .section}

成功新建脱敏规则并进行配置后，您可以在DataWorks中进行脱敏查询。

**说明：** 您需要首先开启DataWorks项目空间的查询脱敏功能，详情请参见[项目配置](cn.zh-CN/使用指南/数据开发/配置中心/项目配置.md#)。

![DataWorks脱敏](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/111830/156767763437734_zh-CN.png)

