# 节点上下文 {#concept_ycz_ts4_kfb .concept}

节点上下文 用于支持参数在上、下游节点之间传递。基本使用方式是先在上游节点定义输出参数及其取值，然后在下游节点定义输入参数（取值引用上游节点的输出参数），即可在下游节点中使用此参数来获取上游节点传递过来的取值。

您可以在特定节点的**调度配置**页面中的**节点上下文**部分进行配置，如下图所示。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556613560_zh-CN.png)

## 输入参数 {#section_crg_bxq_kfb .section}

节点的输入参数用于定义对其依赖的上游节点的输出的引用，并可在节点内部使用，使用方式与其它参数类似。

-   输入参数的定义
    1.  在**调度依赖**中添加依赖的上游节点。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556613562_zh-CN.png)

    2.  在**节点上下文**中，添加输入参数定义，取值选择引用上游节点的输出参数。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556613563_zh-CN.png)

        各字段含义如下。

        |**字段**|**含义**|**备注**|
        |**编号**|​编号指示，系统控制，自动增加|无​|
        |**参数名**|​定义的输入参数名称|无​|
        |**取值来源**|​参数的取值来源，引用上游节点取值|​取值是上游节点**输出参数**的具体取值|
        |**描述**|​参数的概要描述|​会自动从上游节点解析得到|
        |**父节点ID**|​父节点ID|​会自动从上游节点解析得到|
        |**操作**|​提供 编辑 和 删除 两个操作|无​|

-   输入参数的使用

    在节点中使用定义的输入参数的方法和其它系统变量一样的方式，引用方式为 `${输入参数名}`。例如在Shell节点中引用方式如下图所示。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556613564_zh-CN.png)


## 输出参数 {#section_ssq_fwq_kfb .section}

您可以在节点上下文中定义**本节点输出参数**，输出参数的取值分为**常量**和**变量**两种类型：常量为固定字符串，变量指系统支持的全局变量。输出参数定义完成且节点提交后，即可在下游节点中引用，作为下游节点的输入参数的取值。

**说明：** 不支持在当前节点（例如PyODPS节点）内部编写代码的方式来对定义的输出参数进行赋值。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556613561_zh-CN.png)

各字段含义如下。

|**字段**|**含义**|**备注**|
|**编号**|编号值由系统控制，自动增加|无|
|**参数名**|定义的输出参数名称|无|
|**类型**|参数类型|分常量和变量两种|
|**取值**|取值来源| 1.  常量可直接输入一个字符串。
2.  变量仅支持系统变量、调度内置参数、$\{…\}自定义参数和$\[…\]自定义参数。参见**系统支持的全局变量**及[参数配置](intl.zh-CN/使用指南/数据开发/调度配置/参数配置.md#)。

 |
|**描述**|参数的概要描述|无|
|**操作**|提供**编辑**和**删除**两个操作|当存在下游节点依赖时，不支持编辑和删除。在下游节点添加对上游节点引用之前，请谨慎检查，确保上游输出定义正确。|

## 系统支持的全局变量 {#section_tbm_k1r_kfb .section}

-   系统变量

    ```
    
    ${projectId}: 项目ID
    ${projectName}: max compute项目名
    ${nodeId}: 节点ID
    ${gmtdate}: 实例定时时间所在天的00:00:00，格式为yyyy-MM-dd 00:00:00
    ${taskId}: 任务实例ID
    ${seq}: 任务实例序号，代表该实例在当天同节点实例中的序号
    ${cyctime}: 实例定时时间
    ${status}: 实例的状态——成功（SUCCESS）、失败（FAILURE）
    ${bizdate}: 业务日期
    ${finishTime}: 实例结束时间
    ${taskType}: 实例运行类型——正常（NORMAL）、手动（MANUAL）、暂停（PAUSE）、空跑（SKIP）、未选择（UNCHOOSE）、周月空跑（SKIP_CYCLE）
    ${nodeName}: 节点名称
    ```

-   其他参数设置请参见[参数配置](intl.zh-CN/使用指南/数据开发/调度配置/参数配置.md#)。

## 示例 {#section_a4x_n5x_5fb .section}

节点test22是节点test223的上游节点,首先配置节点test22节点上下文的**本节点输出参数**。本例中参数名为date1，取值为$\{yyyymmdd\}，提交节点，如下图所示。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556632180_zh-CN.png)

节点test22提交成功后，配置下游节点test223，请注意保证**父节点输出名称**为test22的**本节点的输出**。在节点上下文的**本节点输入参数**准确输入test22的参数名称date1，即可进行**取值来源**的选取。点击**保存**后即可看到配置效果。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/22783/155324556732181_zh-CN.png)

