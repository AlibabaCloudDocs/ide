# 归并节点 {#concept_kmn_4zn_fgb .concept}

本文将为您介绍归并节点的概念，以及如何新建归并节点、定义归并逻辑，并通过实践案例为您展示归并节点的调度配置和运行详情。

**说明：** 您需要购买DataWorks标准版及以上版本，方可使用归并节点功能。

## 概念 {#section_bsr_yks_ggb .section}

-   归并节点是DataStudio中提供的逻辑控制系列节点中的一类。
-   归并节点可以对上游节点的运行状态进行归并，用来解决分支节点下游节点的依赖挂载和运行触发问题。
-   当前归并节点的逻辑定义不支持选择节点运行状态，只支持将分支节点的多个下游节点归并为成功，以便更下游节点能够直接挂载归并节点作为依赖。

例如，分支节点C定义了两个逻辑互斥的分支走向C1和C2，不同分支使用不同的逻辑写入同一张MaxCompute表，若更下游节点B依赖此MaxCompute表的产出，就必须使用归并节点J先将分支归并后，再把归并节点J作为B的上游依赖。若直接把B挂载在C1、C2下，任何时刻，C1和C2总有一个会因分支条件不满足而未运行，B则不能被调度触发运行。

## 新建归并节点 {#section_uzg_bls_ggb .section}

1.  进入DataStudio（数据开发）页面，选择**新建** \> **控制** \> **归并节点**。

    ![新建节点](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396689935412_zh-CN.png)

    **说明：** 您也可以找到相应的业务流程，右键单击**控制**，选择**新建控制节点** \> **归并节点**。

    ![归并节点](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690052772_zh-CN.png)

2.  填写新建节点对话框中的配置。

    ![新建节点](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690052778_zh-CN.png)

3.  单击**提交**。

## 定义归并逻辑 {#section_z3q_zls_ggb .section}

新建归并节点后 ，进入编辑页面添加归并分支。您可以输入父节点的输出名称或输出表名，单击**添加**按钮。您可以在执行结果中查看运行状态，目前只有**成功**和**分支未运行**两种状态。

![状态](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035415_zh-CN.png)

单击右侧的**调度属性**，即可对归并节点的调度属性进行设置。

![调度属性](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035418_zh-CN.png)

## 归并节点示例 {#section_adn_rns_ggb .section}

在下游节点中，添加分支节点作为上游节点后，通过选择对应的分支节点输出来定义不同条件下的分支走向。例如在下图所示的业务流程中，**分支1**和**分支2**均为分支节点的两个下游节点。

![业务流程](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035420_zh-CN.png)

分支1依赖于autotest.fenzhi121902\_1输出。

![分支1依赖](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035421_zh-CN.png)

分支2依赖于autotest.fenzhi121902\_2输出。

![分支2依赖](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035422_zh-CN.png)

![调度属性](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035424_zh-CN.png)

## 运行任务 {#section_edt_mps_ggb .section}

您可以在**运行日志**中查看满足分支条件、被选中运行的分支下游节点的运行情况。

![运行日志](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035425_zh-CN.png)

您可以在**运行日志**中查看到不满足分支条件、未被选中运行的分支下游节点，被置为跳过。

![跳过](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690035426_zh-CN.png)

归并节点的下游节点正常运行。

![正常运行](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/82218/156396690135427_zh-CN.png)

